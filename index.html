<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" href="mb.css">
		<!-- Load plotly.js into the DOM -->
		<script src='https://cdn.plot.ly/plotly-2.31.1.min.js'></script>
		
	</head>
	
	<body>
		<div id='myDiv' class="mbplot"></div>
		<div id='myDiv2' class="mbplot"></div>
		<script>
			function makeplot() {
				d3.csv("https://betegonlab.github.io/K912_dilution_curve_umap_cell_type_aav_binary.csv", function(umapData){ processData(umapData) } );
			};
			function processUmap(umapData) {

			  console.log(allRows);
			  var x = [], y = [], cell_type = []
			
			  for (var i=0; i<umapData.length; i++) {
			    row = allRows[i];
			    x.push( row['umap1'] );
			    y.push( row['umap2'] );
				cell_type.push( row['cell_type'] );
			  }
			  console.log( 'X',x, 'Y',y, 'SD',standard_deviation );
			  makePlotly( x, y, cell_type );
			}
			
			function makePlotly( x, y, cell_type ){
			  var plotDiv = document.getElementById("plot");
			  var traces = [{
			    x: x,
			    y: y
			  }];
			
			  Plotly.newPlot('myDiv', traces,
			    {title: 'Plotting CSV data from AJAX call'});
			};
			  makeplot();
		</script>
	</body>
</html>
